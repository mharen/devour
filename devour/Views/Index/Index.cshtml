@{
    ViewBag.Title = "Index";
}
<script type="text/javascript">
    $(function () {
        // Proxy created on the fly
        var $connection = $.connection.board;

        // Declare a function on the chat hub so the server can invoke it
        $connection.Pong = function (id, value) {
            $('#cell' + id).toggleClass('enabled', (value % 2) === 0);
        };

        $connection.Init = function(board) {
            for (var i = 0; i < board.length; ++i) {
                $connection.Pong(i, board[i]);
            }
        };

        $connection.Toast = function(message)
        {
            var $message = $('<div class="message"/>').text(message);
            $('body').append($message.fadeIn(250).delay(2000).fadeOut(250));
        }
        
        var $board = $('#board');
        
        for (var i = 0; i < 2000; ++i) {
            var $cell = $("<div/>").attr('id', "cell"+i);
            $board.append($cell);
        }
        
        $board.on('mouseenter', 'div', function (e) {
            var $c = $(e.target);
            var i = $c.attr('id').substring(4);
            $connection.ping(i);
            
        });

        $('#reset').on('click', function() { $connection.reset(); });

        // Start the connection
        $.connection.hub.start();
    });
</script>
<style>
    body {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0;margin: 0;
        background-color: #666;
    }
    #board div.enabled { background-color: #ddd; }

    #board div {
        height: 30px;
        width: 30px;
        font-size: 16px;
        text-align: center;
        vertical-align: middle;
        display: inline-block;
        background-color: #666;
    }
    #reset {
        position: fixed;
        top: 5px;
        left: 5px; 
    }
    .message {
        padding-top: 150px;
        position: fixed;
        left: 0;top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255,255,255,.5);
        font-size: 36px;
        font-family: Georgia;
        text-align: center;
        vertical-align: middle;
    }
</style>
<button id="reset">Reset</button>
<div id="board">
</div>
